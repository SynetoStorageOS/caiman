System Administration Commands               installadm(1M)        

NAME
     installadm - Manages automated installations on a 
     network


SYNOPSIS
     /usr/sbin/installadm

     installadm create-service
         [-n|--service <svcname>]
         [-t|--aliasof <existing_service>]
         [-s|--source <srcimage>]
         [-b|--boot-args <boot property>=<value>,...]
         [-i|--ip-start <dhcp_ip_start>]
         [-c|--ip-count <count_of_ipaddr>]
         [-B|--bootfile-server <server_ipaddr>]
         [-d|--imagepath <imagepath>]
         [-y|--noprompt]

     installadm set-service
         -o|--option <prop>=<value> <svcname>
         prop=value can be:
                 aliasof=<existing_service>
                 default-manifest=<manifest/script name>

     installadm rename-service <svcname> <newsvcname>

     installadm delete-service 
         [-r|--autoremove] [-y|--noprompt] <svcname>

     installadm list
         [-n|--service <svcname>]
         [-c|--client] [-m|--manifest] [-p|--profile]

     installadm enable <svcname>

     installadm disable <svcname>

     installadm add-manifest -n|--service <svcname>
         -f|--file <manifest/script file> 
         [-m|--manifest <manifest/script name>]
         [-c|--criteria <criteria=value|list|range> ... | 
         -C|--criteria-file <criteria.xml>]  
         [-d|--default]

     installadm update-manifest -n|--service <svcname>
         -f|--file <manifest/script file>
         [-m|--manifest <manifest/script name>]

     installadm delete-manifest
         -m|--manifest <manifest/script name> 
         -n|--service <svcname>

     installadm set-criteria
         -m|--manifest <manifest/script name>
         -p|--profile <profile_name> ...
         -n|--service <svcname>
         -c|--criteria <criteria=value|list|range> ... |
         -C|--criteria-file <criteria.xml> |
         -a|--append-criteria <criteria=value|range> ... 

     installadm create-client
         [-b|--boot-args <property>=<value>,...] 
         -e|--macaddr <macaddr> -n|--service <svcname>

     installadm delete-client <macaddr>

     installadm create-profile -n|--service <svcname>
         -f|--file <profile_file>... 
         [-p|--profile <profile_name>]
         [-c|--criteria <criteria=value|list|range> ...] | 
         [-C|--criteria-file <criteria_file>]

     installadm delete-profile -p|--profile <profile_name> ...
         -n|--service <svcname>

     installadm export -n|--service <svcname>
         -m|--manifest <manifest/script name> ...
         -p|--profile <profile name> ...
         -o|--output <pathname>

     installadm validate -n|--service <svcname>
         -P|--profile-file <profile_path> ... |
         -p|--profile <profile_name> ...

     installadm help [<subcommand>] 


DESCRIPTION

    The automated installer (AI) is used to automate the
     installation of the Oracle Solaris OS on one or more
     SPARC and x86 systems over a network.

     The machine topography necessary to employ AI over the
     network is to have an install server, a DHCP server
     (this can be the same system as the install server),
     and the installation clients.  On the install server,
     installation services are set up to contain an AI
     boot image, which is provided to the clients in order
     for them to boot over the network, input specifications
     (AI manifests and Derived Manifest scripts),
     one of which will be selected for the client, and SMF
     configuration profiles, zero or more of which will be
     selected for the client.

     The AI boot image content is available as an AI ISO
     image which is unpacked by the create-service subcommand
     into the installation service's image area. 

     Installation services are created with a default AI
     manifest, but customized manifests or Derived Manifest
     scripts (hereafter called "scripts") can be added to an
     installation service by using the add-manifest
     subcommand.  The add-manifest subcommand also allows
     criteria to be specified, which are used to determine
     which manifest or script should be selected for an
     installation client.  Criteria already associated with a
     manifest or script can be modified using the
     set-criteria subcommand.

     Manifests can include information such as a target
     device, partition information, a list of packages, and
     other parameters (see ai_manifest(4)).  Scripts contain
     commands that query a running AI client system and build
     a custom manifest based on the information it finds.
     When the automated installer is invoked with a script,
     the automated installer runs that script as its first
     task, to generate a manifest.

     When the client boots, a search is initiated for a
     manifest or script that matches the client's machine
     criteria.  When a matching manifest or script is found,
     the client is installed with the Oracle Solaris release
     according to the specifications in the matching manifest
     file, or to the specifications in the manifest file
     derived from the matching script.

     Each service has one default manifest or script.
     The default is used when the criteria of no other
     manifest or script matches the system
     being installed.  Any manifest or script can be
     designated as the default.  Any criteria associated
     with a default manifest or script become inactive and
     are not considered during manifest or script selection.
     If a different manifest or script is later made
     the default, the criteria of the former default
     manifest or script become active again.  Manifests
     or scripts with no criteria associated with them can
     only be used as default manifests or scripts.
     Manifests or scripts without criteria become inactive
     when a different manifest or script is designated the
     default.

     System configuration profiles are complementary to
     manifests and scripts in that they also contain
     specifications for an installation. In particular,
     profiles are used to specify configuration information
     such as user name, user password, timezone, hostname,
     and ip address.  System configuration profiles are
     processed by smf(5) and conform to document format
     service_bundle(4).

     If you want a specific client to use a specific
     installation service, you can associate that client with
     the service by using the installadm create-client
     subcommand. You can also use create-client to modify an
     existing client.

     The installadm utility can be used to accomplish the 
     following tasks:
     - Set up installation services and aliases
     - Set up installation images
     - Set up or delete clients
     - Add, update or delete manifests and scripts
     - Specify or modify criteria for a manifest or script
     - Export manifests and scripts
     - Add or delete system configuration profiles
     - Validate profiles
     - Specify or modify criteria for profiles
     - Export profiles
     - Enable or disable installation services
     - List installation services
     - List clients for an installation service
     - List manifests and scripts for an installation service
     - List profiles for an installation service


SUBCOMMANDS AND OPTIONS
     The installadm command has the subcommands and options 
     listed below. Also, see EXAMPLES below.

    
     installadm

          Displays command usage.

    
     installadm create-service
         [-n|--service <svcname>]
         [-t|--aliasof <existing_service>]
         [-s|--source <srcimage>]
         [-b|--boot-args <boot property>=<value>,...]
         [-i|--ip-start <dhcp_ip_start>]
         [-c|--ip-count <count_of_ipaddr>]
         [-B|--bootfile-server <server_ipaddr>]
         [-d|--imagepath <imagepath>]
         [-y|--noprompt]

         This subcommand sets up a network boot image (net image)
         in the specified imagepath directory, and creates an
         installation service that specifies how a client
         booted from the net image is installed.

         The AI boot image content is provided as an image ISO
         file, whose location is specified by the -s
         option.  The resulting net image is eventually
         located in <imagepath>.  The net image enables client
         installations.
   
         Note the following specifications:
         - When the first installation service of a given
           architecture is created on an install server, an
           alias of that service, 'default-i386' or
           'default-sparc', is automatically created. This
           default service will be used for all 
           installations to clients of that architecture that
           were not added to the install server explicitly
           with the installadm create-client subcommand.  To
           change the service aliased by the default-<arch>
           service, use the installadm set-service subcommand.
         - If you want a client to use a different
           installation service than the default for that
           architecture, you must use the installadm
           create-client subcommand to create a client-specific
           configuration. 
         - If the -i option and the -c option are used, 
           and a DHCP server is not yet configured, a DHCP 
           server is configured. 
         - If an already-configured DHCP server exists, 
           that DHCP server is updated.
         - If the IP range requested is not on a subnet that
           the install server has direct connectivity to and
           the install server is multihomed, the -B option is
           used to provide the address of the bootfile server
           (usually an IP address on this system). This should
           only be necessary when multiple IP addresses are
           configured on the install server and DHCP relays
           are employed. In all other configurations, the
           software can determine this automatically.

         -n|--name   <svcname>
             Optional: Uses this installation service name
             instead of a system-generated service name. 

             If -n option is not specified, a service name is
             generated automatically. 

         -t|--aliasof   <existing_service>
             Optional: Specifies that alias is to be created
             of <existing_service>, providing an alternate
             name for a service. 

         -s|--source   <srcimage>
             Optional: Specifies path to an AI ISO image,
             which is the data source for the net image.

         -b|--boot-args   <boot property>=<value>,...
             Optional: For x86 clients only, sets a property
             value in the service-specific menu.lst file in
             the service image.  Use this option to set boot
             properties that are specific to this service.
             This option can accept multiple property=value
             pairs.

         -i|--ip-start   <dhcp_ip_start>
             Optional: Sets up a new DHCP server. The IP
             addresses, starting from dhcp_ip_start, are set
             up.  The number of IP addresses is provided by
             the -c option.

         -c|--ip-count   <dhcp_ip_cont>
             Optional: Sets up a total number of IP addresses
             in the DHCP configuration equal to the value of
             the dhcp_ip_count.  The first IP address is the 
             value of dhcp_ip_start that is provided by the 
             -i option.  

         -B|--bootfile-server <server_ipaddr>
             Optional: Used to provide the IP address of the
             boot server from which clients should request
             bootfiles.  Only required if this IP address
             cannot be determined by other means.

         -d|--imagepath   <imagepath>
             Optional: Specifies path at which to create the
             net image. If not specified, the default
             location, /export/auto_install/<svcname>, will be
             used; a confirmation prompt is displayed unless
             -y is also specified.

         -y|--noprompt
             Optional: Suppresses any confirmation prompts and
             proceeds with service creation using the supplied
             options and any default values (see "-d").


    
     installadm set-service -o <prop>=<value> <svcname>
       
         Sets a property of a service to a specified value.
     
         -o|--option   <prop>=<value>
             Specifies the property and value to set.

             prop=value can be:
                 aliasof=<existing_service>
                 default-manifest=<manifest/script name>

             - aliasof=<existing_service>
               Modifies the alias, svcname, to be an alias
               of <existing_service>.

             - default-manifest=<manifest/script name>
               Designates a particular manifest or script that
               is already registered with a given service, to
               be the default manifest or script for that
               service.  Use
                    installadm list -n <service> -m
               to get a list of manifests and scripts
               registered with this service.

         <svcname>
              Required: Specifies the name of the installation
              service whose property is being set.


     installadm delete-service 
         [-r|--autoremove] [-y|--noprompt] <svcname>

          Deletes an installation service. Accomplishes the 
          following:
          - Removes the installation service from the DHCP 
            configuration.
          - Deletes the manifest, profiles, client
            configuration files, and web server configuration
            for this installation service.   
          - Deletes the pkg image used to instantiate the
            service.

         -r|--autoremove <svcname>
             If specified, any clients assigned to this
             service, and any services aliased to this
             service, are also removed.

         -y|--noprompt
             Suppresses any confirmation prompts and proceeds 
             with service deletion. 

         <svcname>
             Required: Specifies the installation service name
             to delete.


     installadm enable <svcname>

         Enables a specified installation service. Also,
         enables the web server associated with the service.

         <svcname>
             Required: Specifies the name of the installation
             service to be enabled.


     installadm disable <svcname>

         Disables a specified installation service. Also, 
         disables the web server associated with the service.

         <svcname>
             Required: Specifies the name of the installation
             service to be disabled.

    
     installadm list
         [-n|--service <svcname>]
         [-c|--client] [-m|--manifest] [-p|--profile]

         Lists all enabled installation services on a server.

         -n|--service <svcname>
             Optional: Lists information about the specific
             installation service on a local server. Or:
             - if the -c option is specified, lists the
               client information associated with the
               installation service. 
             - if the -m option is specified, lists the 
               manifests and scripts associated with the
               installation service. 
             - if the -p option is specified, lists the 
               profiles associated with the installation 
               service.

         -c|--client
             Optional: Lists the clients of the installation
             services on a local server.

         -m|--manifest
             Optional: Lists the manifests and scripts
             associated with the installation services on a
             local server.

             When -n is not specified, displays an abbreviated
             listing per service.  This includes the default
             manifest or script, and all non-default manifests
             and scripts which have criteria associated with
             them.  Criteria are not listed.

             When -n is specified, displays all manifests and
             scripts for the given service, using a more
             complete listing format which includes criteria
             for each manifest.  Inactive manifests, which
             have no associated criteria and are not
             designated as the default, are so marked.
             Criteria associated with a default manifest are
             marked as inactive.

         -p|--profile 
             Optional: Lists the profiles associated with the 
             installation services on a local server.

             When -n is not specified, displays an abbreviated
             listing per service that includes the profile
             names.

             When -n is specified, displays the profiles for
             the requested service along with their criteria.


     installadm add-manifest -n|--service <svcname>
         -f|--file <manifest/script file> 
         [-m|--manifest <manifest/script name>]
         [-c|--criteria <criteria=value|list|range> ... | 
         -C|--criteria-file <criteria.xml>]  
         [-d|--default]

         Associates a manifest or script with a specific
         installation service, thus making the manifest or
         script available on the network, independently from
         creating a service. A non-default manifest or script
         can be used (active) only when criteria are associated
         with it.  Criteria may be entered on the command line
         (-c) or via a criteria XML file (-C).  Any criteria
         specified along with the -d option will be
         temporarily ignored until the manifest or script is
         no longer designated as the default.

         The name of the manifest is derived from (in order):
         1) installadm add-manifest -m option, if present
         2) manifest name attribute, if present in the
            manifest, i.e.
                <ai_instance name="man_name">
         3) manifest or script filename

         -n|--service   <svcname>
             Required: Specifies the name of the install 
             service this manifest or script is to be
             associated with.

         -f|--file   <manifest/script file> 
             Required: Specifies the path name of the manifest
             or script to add.

         -m|--manifest   <manifest_name> 
             Optional: Specifies the name of the AI manifest
             or script.  The manifest or script will be
             referred to by this name in subsequent installadm
             commands and installadm list output.  A
             manifest's ai_instance name will be set to
             <manifest/script name> if provided.
    
         -c|--criteria   <-c <criteria=value|list|range> ...> 
             Optional: Specifies criteria to be associated
             with the added manifest or script. When
             publishing a default manifest, criteria will be
             registered but kept inactive until the manifest
             or script is no longer designated the default.
             A command can specify -c multiple times.

         -C|--criteria-file   <criteria.xml> 
             Optional: Specifies the path name of a criteria 
             XML file containing criteria to be associated
             with the added manifest or script. When
             publishing a default manifest or script,
             criteria will be registered but kept inactive
             until the manifest or script is no longer
             designated the default.

         -d|--default
             Optional: Specifies that this manifest or script
             is the new default manifest or script for the
             service. Any criteria specified will be ignored
             until the manifest or script is no longer the
             default.

     installadm update-manifest -n|--service <svcname>
         -m|--manifest <manifest/script name>
         -f|--file <manifest/script file> 

         Updates a specific manifest or script which is
         associated with a specific installation service.  Any
         criteria or default status remain with the manifest
         or script following the update.

         The name of the manifest or script to be updated
         is derived from (in order):
         1) installadm update-manifest -m option, if
            present
         2) manifest name attribute, if present in the
            changed manifest and it matches one in an existing
            manifest, i.e.
                <ai_instance name="man_name">
         3) manifest/script file name, if it matches the
            manifest name attribute in an existing manifest,
            or the name given by installadm list if it
            matches the name of an existing script.

         The replacement manifest or script is given by the
         manifest/script file pathname.

         -n|--service   <svcname>
             Required: Specifies the name of the install
             service this manifest or script is to be
             associated with.

         -f|--file   <manifest/script file> 
             Required: Specifies the path name of the
             replacement manifest or script.

         -m|--manifest   <manifest/script name> 
             Optional: Specifies the name of the replacement
             AI manifest or script.


     installadm delete-manifest
         -m|--manifest <manifest/script name> 
         -n|--service <svcname>

         Deletes a manifest or script that was published with
         a specific installation service.  A default manifest
         or script cannot be deleted.

     -m|--manifest   <manifest/script name> 
         Required: Specifies the name of an AI manifest or
         script as output by installadm list with -n option.

     -n|--service   <svcname>
         Required: Specifies the name of the installation
         service this manifest is associated with.

    
     installadm create-profile -n|--service <svcname>
         -f|--file <profile_file>... 
         [-p|--profile <profile_name>]
         [-c|--criteria <criteria=value|list|range> ...] | 
         [-C|--criteria-file <criteria_file>]

         Associates profiles with a specific installation
         service. Criteria can optionally be associated with a
         profile by either entering them on the command line
         (-c) or via a criteria XML file (-C).  Profiles
         created without criteria are associated with all
         clients of the service.

         The name of the profile is derived from (in order):
         1) installadm create-profile -p option, if present
         2) profile base filename (see basename(1)).

         Profile names must be unique for an AI service.
         If multiple "-f"s are used to create more than one 
         profile with the same criteria, then the "-p" 
         option is invalid and the names of the profiles
         are derived from their filenames.

         -n|--service   <svcname>
             Required: Specifies the name of the installation
             service of the profile being updated.

         -f|--file   <profile_file> 
             Required: Specifies the path name of the file
             with which to add the profile. Multiple profiles
             may be specified. 
    
         -p|--profile   <profile_name> 
             Optional: Specifies the name of the profile being
             created. Valid only for single profile creation.

         -c|--criteria   <criteria=value|list|range> ... 
             Optional: Specifies criteria to be associated
             with the profile(s).  A command can specify -c
             multiple times.

         -C|--criteria_file   <criteria.xml> 
             Optional: Specifies the path name of a criteria
             XML file containing criteria to be associated
             with the specified profile(s). 


     installadm delete-profile -p|--profile <profile_name> ...
         -n|--service <svcname>

         Deletes a profile that is associated with a specific 
         installation service.
    
         -p|--profile   <profile_name> 
             Required: Specifies the name of the profile to
             delete.

         -n|--service   <svcname>
             Required: Specifies the name of the installation
             service of the profile being deleted.


     installadm set-criteria
         -m|--manifest <manifest/script name>
         -p|--profile <profile_name> ...
         -n|--service <svcname>
         -c|--criteria <criteria=value|list|range> ... |
         -C|--criteria-file <criteria.xml> |
         -a|--append-criteria <criteria=value|list|range> ... 

         Updates criteria of an already published
         manifest/script, profile, or both. Criteria can be
         specified via the command line or or via a criteria
         xml file. Criteria must be specified with one of the
         mutually exclusive options, -a, -c, or -C.

         Valid criteria are described under the add-manifest
         subcommand.

         -m|--manifest   <manifest/script name> 
             Specifies the name of a manifest or script.

         -p|--profile   <profile_name> 
             Specifies the name of a profile.  Any number of
             profiles can be specified.

         -n|--service   <svcname>
             Required: Specifies the name of the installation
             service associated with this manifest/script or
             profile.

         -c|--criteria   <criteria=value|list|range>  
             Specifies criteria to replace all existing 
             criteria for the manifest/script or profile.

         -C|--criteria-file   <criteria.xml> 
             Specifies the path name of a criteria XML file 
             containing criteria to replace all existing 
             criteria for the manifest/script or profile.

         -a|--append-criteria   <criteria=value|list|range> 
             Specifies criteria to be appended to the existing
             criteria for the manifest/script or profile. If
             the criteria specified already exists, the 
             value/list/range of that criteria is replaced by 
             the specified value/list/range.


     installadm export -n|--service <svcname>
         -m|--manifest <manifest/script name> ...
         -p|--profile <profile name> ...
         -o|--output <pathname>

         Displays (exports) specified manifest/scripts and/or
         profiles belonging to a service.  At least one
         manifest/script or profile must be provided.  Display
         goes to stdout unless the -o option redirects to a
         file or directory.

         -n|--service   <svcname>
             Required: Specifies the installation service 
             associated with the profile to export.
   
         -m|--manifest   <manifest_name> 
             Specifies the name of a manifest or script to
             export.  A command can specify -m multiple times.

         -p|--profile   <profile_name>
             Required: Specifies the name of a profile to
             export. A command can specify -p multiple times.
   
         -o|--output   <pathname>
             Optional: Redirect output.  <output_pathname must
             be a directory if multiple manifests, scripts
             and/or profiles are requested.  <output_pathname>
             can be a file if only one manifest, script or
             profile is requested.
   

     installadm create-client
         [-b|--boot-args <property>=<value>,...] 
         -e|--macaddr <macaddr> -n|--service <svcname>

         Accomplishes optional setup tasks for a specified 
         client, in order to provide custom client settings
         that vary from the default settings used by the
         installadm create-service subcommand. Enables user to 
         specify a non-default service name and boot arguments
         for a client. Can also be used to modify an existing
         client.
    
         -b|--boot-args   <property>=<value>,...
             Optional: For x86 clients only, sets a property 
             value in the client-specific menu.lst file in
             /etc/netboot. Use this option to set boot
             properties that are specific to this client. This
             option can accept multiple property=value pairs.

         -e|--macaddr   <macaddr>
             Required: Specifies a MAC address for the client.
    
         -n|--service   <svcname>
             Required: Specifies the installation service for
             client installation.
   

     installadm delete-client <macaddr>

         Deletes an existing client's specific service  
         information that was previously set up using the 
         installadm create-client command.

         <macaddr>
             Required: Specifies the MAC address of the
             client to delete.


     installadm validate -n|--service <svcname>
         -P|--profile-file <profile_path> ... |
         -p|--profile <profile_name> ...

         Validates specified profile(s).  The validate
         subcommand can be used to either validate profiles
         in the database (-p) or to validate profiles while
         they are being developed before their entry into the
         database (-P).

         -n|--service   <svcname>
             Required: Specifies the service with which the
             profile(s) are associated.

         -P|--profile-file   <profile_file> 
             Specifies an external profile file to validate.

         -p|--profile   <profile_name> 
             Specifies the name of the profile to validate.


     installadm help [<subcommand>]

          Displays the syntax for the installadm utility.

     <subcommand>
         If subcommand is provided, the command provides
         the syntax for that subcommand.

CRITERIA

     Manifests, scripts and profiles can be used to configure
     AI clients differently according to certain
     characteristics, or criteria.  Only one manifest or
     script may be associated with a client, whereas any
     number of profiles may be associated.

     The criteria values are determined by the AI client
     during startup.

     The following AI client system criteria may be specified
     for both manifests/scripts and profiles unless otherwise
     noted:

     Criteria   Description
     --------   -----------
     arch     - architecture per uname(1), option '-m'
     cpu      - CPU class per uname(1), option '-p'
     hostname - assigned hostname, profiles only
     ipv4     - IP version 4 network address
     mac      - hexadecimal MAC address with ':' separators
     mem      - memory size in MiB per prtconf(1M)
     network  - IP version 4 network number
     platform - platform name per uname(1), option '-i'
     zonename - name of a zone per zones(5)

     ipv4, mac, mem, network specifications may be expressed
     as ranged values separated by a hyphen, '-'. To signify
     no limit to one end of a ranged specification, use
     'unbounded'.

     Any criteria that is not specifiable as a ranged value
     can be specified as a list of values separated by white
     space.

     See examples below.

CRITERIA FILES

     A criteria XML file allows you to specify criteria for a
     manifest/script or profile by passing the file to the
     add-manifest, create-profile, or set-criteria subcommands.
     Criteria can be specified as a value, a list of values,
     or a range, by using the following tags.

     For a criterion with a specific value:

     <ai_criteria_manifest>
         <ai_criteria name=XXXX>
             <value>yyyy</value>
         </ai_criteria>
     </ai_criteria_manifest>

     where XXXX is the name of the criterion (e.g. MAC, IPV4,
     MEM, or ARCH) and yyyy is the value of the criterion.

     For a criterion with a list of values:

     <ai_criteria_manifest>
         <ai_criteria name=XXXX>
             <value>
                 aaaa
                 bbbb
                 cccc
                 dddd
             </value>
         </ai_criteria>
     </ai_criteria_manifest>
     
     where XXXX is the name of the criterion (e.g. hostname,
     zonename, or any other criteria that is not a ranged
     criteria) and aaaa, bbbb, cccc, dddd are the values of
     the criterion.

     For a criterion with a range:

     <ai_criteria_manifest>
         <ai_criteria name=XXXX>
             <range>
                 yyyy1
                 yyyy2
             </range>
         </ai_criteria>
     </ai_criteria_manifest>

     where XXXX is the name of the criterion (e.g. MAC, IPV4,
     or MEM) and yyyy1 and yyyy2 are the lower and uppper 
     bounds of the range.

     Multiple criteria may be specified in the file between
     the <ai_criteria_manifest> and </ai_criteria_manifest>
     tags.
 
EXAMPLES


     Example 1: Set up an install server and an x86
     installation service for the first time. The command
     includes a starting IP address and total count of IP
     addresses, in order to configure the DHCP server.

     # installadm create-service -n sol-11-i386-svc
       -s /export/isos/sol-11-i386.iso 
       -i 172.0.0.10 -c 10 -d /export/images/soli386

     The AI ISO image is at /export/isos/sol-11-i386.iso.
     The command sets up a net image and an installation
     service that is based on the AI ISO image, at
     /export/images/soli386.  This net image enables client
     installations.

     The DHCP server is created. The starting IP address is
     172.0.0.10 and ten IP addresses are allocated for
     clients.

     Because this is the first i386 service created, the
     default-i386 service, is automatically created and
     aliased to this service. The default-i386 alias is
     operational and a client booted via PXE will boot and
     install from the default-i386 service.


     Example 2: Set up a SPARC installation service for the
     first time. 

     # installadm create-service -n sol-11-sparc-svc
       -s /export/isos/sol-11-sparc.iso 
       -d /export/images/solsparc

     The AI ISO image is at /export/isos/sol-11-sparc.iso.
     The command sets up a net image and an installation
     service that is based on the AI ISO image, at
     /export/images/solsparc.  This net image enables client
     installations.

     Because this is the first SPARC service created, the
     default-sparc service, is automatically created and
     aliased to this service. The default-sparc alias is
     operational and a SPARC client will boot and install from
     the default-sparc service.


     Example 3: Use the following sample command to set 
     up a client that references a specific installation
     service.  The installation service should already exist. 

     # installadm create-client -b "console=ttya"
       -e 0:e0:81:5d:bf:e0 -n my-i386-service

     In this example, the command creates a client-specific
     setup for the system with MAC address of
     0:e0:81:5d:bf:e0. This client will use the installation
     service previously set up, named my-i386-service, and
     that service's associated net image. The command sets the
     boot property, console=ttya, in the client-specific
     menu.lst file in /etc/netboot.
 

     Example 4: Use the following sample command to add a new
     service named my-sparc-service, retaining existing
     services, and leaving the existing default unchanged:

     # installadm create-service -n my-sparc-service
       -s /export/isos/mysparc.iso 
       -d /export/ai/mysparc-image


     Example 5: Use the following two sample commands to add a
     new service named my-sparc-service, retaining existing
     services, and making the new service the default for 
     SPARC clients:

     # installadm create-service -n my-sparc-service
       -s /export/isos/mysparc.iso 
       -d /export/ai/mysparc-image

     # installadm set-service
       -o aliasof=my-sparc-service default-sparc


     Example 6: Use the following sample command to add a new
     manifest to the service_092910 installation service, and
     make it the service's default manifest.  The manifest
     data is in my_manifest.xml.  Future installadm commands
     will refer to this manifest as my_manifest:

     # installadm add-manifest -d -f my_manifest.xml 
       -m my_manifest -n service_092910


     Example 7: Use the following sample command to add a
     Derived Manifests script named my_script to an existing
     installation service called service_092910.  Note:
     scripts are added the same way as manifests:

     # installadm add-manifest -f my_script.py
       -m my_script -n service_092910

     Please see the "Installing Oracle Solaris 11 Systems"
     guide for more information on how to create a Derived
     Manifests script.


     Example 8: Use the following sample command to replace
     the default manifest for an existing installation
     service, service_092910, with a custom manifest which has
     already been added to the service as my_manifest
     (specifying -m my_manifest to the installadm add-manifest
     command):

     # installadm set-service -o default-manifest=my_manifest
       -n service_092910


     Example 9: Use the following sample command to list the
     installation services on a local server:

     # installadm list

     In this example, the following output is displayed:

.sp
.in +9
.nf
Service Name     Alias Of         Status  Arch  Image Path 
------------     --------         ------  ----  ---------- 
default-i386     sol-11-i386-svc  on      x86   /export/images/soli386
default-sparc    sol-11-sparc-svc on      Sparc /export/images/solsparc
sol-11-i386-svc  -                on      x86   /export/images/soli386
sol-11-sparc-svc -                on      Sparc /export/images/solsparc
.fi
.in -9
.sp

     Example 10: Use the following sample command to list the
     clients of a specific installation service on a local
     server:

     # installadm list -c -n my-x86-service

     In this example, the following output is displayed:

.sp
.in +9
.nf
Service Name   Client Address    Arch  Image Path 
------------   --------------    ----  ---------- 
my-x86-service 01:C2:52:E6:4B:E1 i386  /export/images/myimage
.fi
.in -9
.sp

     Example 11: Use the following sample command to list the 
     manifests and scripts associated with a specific
     installation service on a local server:

     # installadm list -m -n my-x86-service

     In this example, the following output is displayed,
     showing:
     - a non-default manifest with criteria (manifest2),
     - a non-default script with criteria (sparc_setup)
     - a default manifest with criteria which are ignored
       (new_default),
     - a non-default manifest (orig_default) which is marked
       inactive as it has no criteria:

.sp
.in +9
.nf
Manifest      Status    Criteria 
--------      ------    -------- 
manifest2               arch  = i86pc
                        mem   = 4096 MB - unbounded

sparc_setup             arch  = sun4v

new_default   Default   (Ignored: mem   = 2048 MB - 4095 MB)

orig_default  Inactive  None
.fi
.in -9
.sp

     Example 12: Use the following sample command to list the 
     profiles on a local server:

     # installadm list -p

     In this example, the following output is displayed:

.sp
.in +9
.nf
# installadm list -p
Service Name Profile
------------ -------
sparc2       myprofile.xml
             myprofile2.xml
svc0817      profile3
svc0819      profile4.xml
             newprofile
             foo.xml
.fi
.in -9
.sp

     Example 13: Use the following sample command to add the
     manifest in /export/my_manifest to svc1 with a criterion
     of MAC address equaling "aa:bb:cc:dd:ee:ff":

     # installadm add-manifest -f /export/my_manifest.xml
       -n svc1 -c MAC="aa:bb:cc:dd:ee:ff" 

     In this example, the manifest does not contain a name
     attribute, so the manifest name is taken from the file
     name:

     # installadm list -m -n svc1

.sp
.in +9
.nf
Manifest          Criteria
--------          --------
my_manifest.xml   mac  = AA:BB:CC:DD:EE:FF
.fi
.in -9
.sp

     Example 14: Use the following sample command to add the 
     manifest in /export/my_manifest to svc1 with the
     criterion of IPv4 range between 10.0.2.100 to 10.0.2.199:

     # installadm add-manifest
       -f /export/my_manifest -n svc1 
       -m chosen_name -c IPV4="10.0.2.100-10.0.2.199" 

     In this example, the manifest name is taken from the -m
     option. 

     # installadm list -m -n svc1

.sp
.in +9
.nf
Manifest          Criteria
--------          --------
chosen_name       ipv4 = 10.0.2.100 - 10.0.2.199
.fi
.in -9
.sp

     Example 15: Use the following sample command to add the
     manifest in /export/manifest3 to svc1 with criteria of
     2048MB memory or greater and an architecture of i86pc:

     # installadm add-manifest -f /export/manifest3 -n svc1
       -c MEM="2048-unbounded" -c ARCH=i86pc
     
     In this example, the manifest name is taken from the name
     attribute of the manifest, name="my_name", i.e.:
         <ai_instance name="my_name">

     # installadm list -m -n svc1

.sp
.in +9
.nf
Manifest          Criteria
--------          --------
my_name           arch = i86pc
                  mem  = 2048 MB - unbounded
.fi
.in -9
.sp

     Example 16: Use the following sample command to add the
     profile in /export/profile4 to svc1 with criteria of
     any of the hostnames 'myhost1', 'host3', or 'host6':

     # installadm create-profile -f /export/profile4 -n svc1
       -p profile4 -c hostname="myhost1 host3 host6"

     # installadm list -p -n svc1

.sp
.in +9
.nf
Profile          Criteria
-------          --------
profile4         hostname = myhost1 host3 host6
.fi
.in -9
.sp

     Example 17: Use the following sample command to append to
     the criteria of manifest2 of svc1, a criterion of 4096MB
     memory or greater:

     # installadm set-criteria -m manifest2 -n svc1
       -a MEM="4096-unbounded"
     

     Example 18: Use the following sample command to replace
     the criteria of manifest2 of svc1 with the criteria
     specified by the file, /tmp/criteria.xml:

     # installadm set-criteria -m manifest2 -n svc1
       -C /tmp/criteria.xml
    
     See the CRITERIA FILES section for more information on
     the contents of the criteria xml file.


     Example 19:  Use the following sample command to validate
     the profiles stored in the files myprofdir/myprofile.xml 
     and herprofdir/herprofile.xml during their development:

     # installadm validate -P myprofdir/myprofile.xml 
       -P herprofdir/herprofile.xml -n svc1


     Example 20:  Use the following sample command to export 
     the profile, myprofile.xml in service, svc1:

     # installadm export -p myprofile.xml -n svc1


     Example 21: Use the following sample command to update
     a manifest named spec in service svc2, with the contents
     of a different manifest called new_spec:

     # installadm update-manifest -n svc2
       -f /home/admin/new_spec -m spec


     Example 22: Use the following series of sample commands
     to export the data of an existing manifest named spec in
     service svc2, and then update it with modified content:

     # installadm export -n svc2 -m spec -o /home/admin/spec
     (make changes to /home/admin/spec)
     # installadm update-manifest -n svc2
       -f /home/admin/spec -m spec


ATTRIBUTES
     See attributes(5) for descriptions of the  following
     attributes:
     ________________________________________________________
    |       ATTRIBUTE TYPE        |       ATTRIBUTE VALUE    |
    |_____________________________|__________________________|
    | Availability                | install/installadm       |
    |_____________________________|__________________________|
    | Interface Stability         | None / Under Development |
    |_____________________________|__________________________|


SEE ALSO
     aimanifest(1M), dhcpd.conf(5), isc-dhcp(5), smf(5),
     service_bundle(4), attributes(5)

     Oracle Solaris Automated Installer Guide on
     http://docs.sun.com/
    
     Getting Started with Oracle Solaris on
     http://docs.sun.com/


		Last Change: Jun 22, 2011
